<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>JukeBox DnD</title>
    <link rel="stylesheet" href="./styles.css" />
</head>

<body>
    <div id="app">
        <header>
            <h1>JukeBox DnD</h1>
            <p class="subtitle">Ambiance musicale dynamique pour vos parties</p>
        </header>

        <main>
            <div class="container">
                <!-- Onglets -->
                <div id="view-tabs">
                    <button class="tab-btn active" data-view="player">üéµ Lecteur</button>
                    <button class="tab-btn" data-view="library">üìö Biblioth√®que</button>
                </div>

                <!-- ======================== -->
                <!-- VUE LECTEUR              -->
                <!-- ======================== -->
                <div id="player-view" class="view">
                    <!-- S√©lecteur de playlist -->
                    <div id="playlist-selector">
                        <label>Playlist :</label>
                        <select id="playlist-select">
                            <option value="">-- Choisir une playlist --</option>
                        </select>
                        <button id="create-playlist-btn" class="icon-btn" title="Cr√©er une playlist">‚ûï</button>
                        <button id="delete-playlist-btn" class="icon-btn danger-icon"
                            title="Supprimer la playlist">üóëÔ∏è</button>
                    </div>

                    <!-- Indicateur piste actuelle -->
                    <div id="current-track-indicator">
                        <span class="track-number">Piste 0/0</span>
                        <span class="track-title">Aucune piste</span>
                    </div>

                    <!-- Informations de la piste -->
                    <div id="track-info">
                        <div class="track-name">
                            <span class="label">Version :</span>
                            <span id="current-version">-</span>
                        </div>
                        <div id="track-status" class="status arr√™t√©">Arr√™t√©</div>
                    </div>

                    <!-- S√©lecteur de version -->
                    <div id="version-switcher">
                        <h3>Ambiance</h3>
                        <div id="version-buttons" class="version-buttons">
                            <!-- G√©n√©r√© dynamiquement selon les versions de la piste -->
                        </div>
                    </div>

                    <!-- Navigation playlist -->
                    <div id="navigation-controls">
                        <button id="prev-btn" class="nav-btn">‚èÆ Pr√©c√©dent</button>
                        <button id="next-btn" class="nav-btn">Suivant ‚è≠</button>
                    </div>

                    <!-- Contr√¥les de lecture -->
                    <div id="player-controls">
                        <button id="play-btn" class="control-btn">‚ñ∂ Play</button>
                        <button id="pause-btn" class="control-btn">‚è∏ Pause</button>
                        <button id="stop-btn" class="control-btn">‚èπ Stop</button>
                    </div>

                    <!-- Mode de lecture -->
                    <div id="play-mode-selector">
                        <div class="mode-buttons">
                            <button class="mode-btn active" data-mode="noLoop">‚û°Ô∏è Normal</button>
                            <button class="mode-btn" data-mode="loopOne">üîÇ Boucle</button>
                            <button class="mode-btn" data-mode="loopAll">üîÅ Tout</button>
                        </div>
                    </div>

                    <!-- Barre de progression -->
                    <div id="progress-container">
                        <div class="time-display">
                            <span id="current-time">0:00</span>
                            <span id="duration">0:00</span>
                        </div>
                        <div class="progress-bar">
                            <div id="progress-fill" class="progress-fill"></div>
                        </div>
                    </div>

                    <!-- Volume -->
                    <div id="volume-control">
                        <label for="volume">üîä Volume:</label>
                        <input type="range" id="volume" min="0" max="100" value="50" />
                        <span id="volume-value">50%</span>
                    </div>

                    <!-- Liste pistes de la playlist -->
                    <div id="playlist-tracks-container">
                        <h3>üìÄ Pistes</h3>
                        <div id="playlist-tracks">
                            <p class="empty-message">Aucune piste. Ajoutez des musiques depuis la biblioth√®que.</p>
                        </div>
                    </div>
                </div>

                <!-- ======================== -->
                <!-- VUE BIBLIOTH√àQUE         -->
                <!-- ======================== -->
                <div id="library-view" class="view hidden">
                    <div class="library-header">
                        <h3>üìö Ma Biblioth√®que</h3>
                        <button id="add-track-btn" class="primary-btn">‚ûï Ajouter une musique</button>
                    </div>

                    <div id="library-tracks">
                        <p class="empty-message">Biblioth√®que vide. Cliquez sur "Ajouter une musique" pour commencer.
                        </p>
                    </div>
                </div>
        </main>
    </div>

    <!-- ======================== -->
    <!-- MODAL AJOUT DE PISTE     -->
    <!-- ======================== -->
    <div id="add-track-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2>‚ûï Ajouter une musique</h2>
                <button class="close-modal-btn">&times;</button>
            </div>

            <div class="modal-body">
                <!-- Titre -->
                <div class="form-group">
                    <label>Titre de la piste *</label>
                    <input type="text" id="new-track-title" placeholder="Ex: Taverne M√©di√©vale" required />
                </div>

                <!-- Versions -->
                <div class="form-group">
                    <label>Versions audio</label>
                    <div id="version-inputs">
                        <div class="version-input" data-index="0">
                            <input type="text" class="version-name" placeholder="Nom (calm, combat...)" value="calm" />
                            <button type="button" class="select-file-btn">üìÅ Fichier</button>
                            <span class="file-path">Aucun fichier</span>
                            <input type="hidden" class="file-path-value" />
                        </div>
                    </div>
                    <button type="button" id="add-version-input-btn" class="secondary-btn">+ Ajouter une
                        version</button>
                </div>

                <!-- Volume par d√©faut -->
                <div class="form-group">
                    <label>Volume par d√©faut</label>
                    <div class="volume-slider-group">
                        <input type="range" id="new-track-volume" min="0" max="100" value="50" />
                        <span id="new-track-volume-value">50%</span>
                    </div>
                </div>

                <!-- Playlists -->
                <div class="form-group">
                    <label>Ajouter aux playlists</label>
                    <div id="playlist-checkboxes">
                        <!-- G√©n√©r√© dynamiquement -->
                    </div>
                    <div class="inline-create">
                        <input type="text" id="new-playlist-name" placeholder="Nouvelle playlist..." />
                        <button type="button" id="create-playlist-inline-btn" class="secondary-btn">Cr√©er</button>
                    </div>
                </div>
            </div>

            <div class="modal-footer">
                <button type="button" id="cancel-add-track" class="secondary-btn">Annuler</button>
                <button type="button" id="confirm-add-track" class="primary-btn">Ajouter la piste</button>
            </div>
        </div>
    </div>

    <!-- ======================== -->
    <!-- MODAL CR√âATION PLAYLIST  -->
    <!-- ======================== -->
    <div id="create-playlist-modal" class="modal hidden">
        <div class="modal-content modal-small">
            <div class="modal-header">
                <h2>‚ûï Nouvelle Playlist</h2>
                <button class="close-modal-btn">&times;</button>
            </div>

            <div class="modal-body">
                <div class="form-group">
                    <label>Nom de la playlist</label>
                    <input type="text" id="playlist-name-input" placeholder="Ex: Ambiance Donjon" />
                </div>
            </div>

            <div class="modal-footer">
                <button type="button" class="cancel-modal-btn secondary-btn">Annuler</button>
                <button type="button" id="confirm-create-playlist" class="primary-btn">Cr√©er</button>
            </div>
        </div>
    </div>

    <!-- ======================== -->
    <!-- MODAL √âDITION PISTE      -->
    <!-- ======================== -->
    <div id="edit-track-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2>‚úèÔ∏è Modifier la piste</h2>
                <button class="close-modal-btn">&times;</button>
            </div>

            <div class="modal-body">
                <input type="hidden" id="edit-track-id" />

                <div class="form-group">
                    <label>Titre</label>
                    <input type="text" id="edit-track-title" />
                </div>

                <div class="form-group">
                    <label>Versions</label>
                    <div id="edit-version-list">
                        <!-- G√©n√©r√© dynamiquement -->
                    </div>
                    <button type="button" id="add-edit-version-btn" class="secondary-btn">+ Ajouter une version</button>
                </div>

                <div class="form-group">
                    <label>Volume par d√©faut</label>
                    <div class="volume-slider-group">
                        <input type="range" id="edit-track-volume" min="0" max="100" value="50" />
                        <span id="edit-track-volume-value">50%</span>
                    </div>
                </div>
            </div>

            <div class="modal-footer">
                <button type="button" id="delete-track-btn" class="danger-btn">üóëÔ∏è Supprimer</button>
                <button type="button" class="cancel-modal-btn secondary-btn">Annuler</button>
                <button type="button" id="save-track-edits" class="primary-btn">Sauvegarder</button>
            </div>
        </div>
    </div>

    <script src="./renderer.js" type="module"></script>
</body>

</html>